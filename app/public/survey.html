<!DOCTYPE html>
<html>
    <head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href=https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    </head>
    <body>

        <header>
            <nav>
                <div class="nav-wrapper">
                    <a href="#" class="brand-logo">Friend-Finder</a>
                    <ul id="nav-mobile" class="right hide-on-med-and-down">
                        <li><a href="/">Home</a></li>
                        <li><a href="/api/friends">Friend List API</a></li>
                        <li><a href="https://github.com/devindinapoli/friend-finder">GitHub Repo</a></li>
                    </ul>
                </div>
            </nav>
        </header>    

        <div class="container">    
            <div class="row">
                <div class ="col s12 main">
                    <div id="main">
                        <h1>Your Information</h1>
                        <hr>
                        <div class="input-field col s6">
                            <input id="name" type="text" class="validate">
                            <label for="name">Name</label>
                        </div>
                            <div class="input-field col s6">
                            <input id="photo" type="text" class="validate">
                            <label for="photo">Photo (Link)</label>
                        </div>
                        <p>Scroll Down For More Questions!</p>
                        
                        <div class="input-field col s12">
                            <h5>When you start something, you don't stop until it's finished.</h5>
                            <select id="q1">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>

                        <div class="input-field col s12">
                            <h5>You daydream of Obama daily.</h5>
                            <select id="q2">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                        </div>

                        <div class="input-field col s12">
                            <h5>Coffee is a necessity in your daily routine.</h5>
                            <select id="q3">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>You enjoy talking about space.</h5>
                            <select id="q4">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>You love beans.</h5>
                            <select id="q5">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>Flying in the sky (or space) terrifies you.</h5>
                            <select id="q6">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>Batman is the greatest superhero of all time.</h5>
                            <select id="q7">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>Spending time outside helps clear your mind.</h5>
                            <select id="q8">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>Nature is pretty neat.</h5>
                            <select id="q9">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>

                        <div class="input-field col s12">
                            <h5>Tacos are the greatest food ever made.</h5>
                            <select id="q10">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>                                
                                <option value="5">5 (Strongly Agree)</option>
                            </select>                           
                        </div>
                        <button class="btn-flat home-submit" type="submit" name="action" id="submit-button">Show Me My Soulmate!</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="modal1" class="modal">
            <div class="modal-content">
                <h4>Your Match</h4>
                <hr>
                <h5 id="userMatch"></h5>
                <img id="userMatchPic" class="materialboxed" width="650" src="">
            </div>
            <div class="modal-footer">
                <a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Try Again?</a>
            </div>
        </div>
        
        <script type="text/javascript">
            $(document).ready(function() {
                $('select').material_select();
                $('.modal').modal({

                dismissible: false,
				opacity: .5, 
				inDuration: 300, 
				outDuration: 200, 
				startingTop: '4%', 
                endingTop: '10%'
                });
            });

            $("#submit-button").on("click", function(event){
                event.preventDefault();
                var userAnswers = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#q1").val().trim(),
                        $("#q2").val().trim(),
                        $("#q3").val().trim(),
                        $("#q4").val().trim(),
                        $("#q5").val().trim(),
                        $("#q6").val().trim(),
                        $("#q7").val().trim(),
                        $("#q8").val().trim(),
                        $("#q9").val().trim(),
                        $("#q10").val().trim(),
                    ]
                };
                
                //checking to see if data was stored    
                //console.log('userAnswers = ' + JSON.stringify(userAnswers));

                $.post("/api/friends", userAnswers)
            .done(function(data){
                    $("#userMatch").html(data.matchName);
                    $("#userMatchPic").attr("src", data.matchPic);
                    $("#modal1").modal("open");
                })
            });
        </script>
    </body>
</html>